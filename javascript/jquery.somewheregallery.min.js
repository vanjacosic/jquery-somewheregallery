/*! jquery-somewheregallery by Opbeat - 05-11-2013 */
!function(a,b,c){function d(b,c){if(this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,!this.settings.profile)throw"A profile name is required!";var d=["image","profile_image","avatar_image","talk_image"];if(-1===a.inArray(this.settings.imageSize,d))throw"Invalid imageSize specified!";this.init()}var e="somewhereGallery",f={profile:null,imageSize:"talk_image",baseURL:"https://www.somewhere.com/",debug:!1};d.prototype={init:function(){var b=this;b.settings.debug===!0&&b.debug(),a(b.element).addClass("somewhere-gallery"),b.getProfileData(this.settings.profile)},debug:function(){var a=this;console.log("Settings:",a.settings)},createSparksUrl:function(a){return this.settings.baseURL+a+"/sparks.json"},getProfileData:function(b){var c=this;a.ajax({url:c.createSparksUrl(b),dataType:"json",success:function(a){c.loadSparkData(a)},error:function(){throw"API error!"}})},loadSparkData:function(b){var c=this;a.each(b,function(a,b){c.createGalleryImage(b)})},createGalleryImage:function(a){var b,d,e,f,g=this;b=c.createElement("div"),b.className="spark",d=c.createElement("a"),d.className="spark-link",d.href=a.permalink,e=c.createElement("img"),e.className="spark-image",e.src=a[g.settings.imageSize],e.title=a.text_content,f=c.createElement("div"),f.className="spark-caption",d.appendChild(e),b.appendChild(d),f.appendChild(c.createTextNode(a.text_content.replace(/&quot;/g,""))),b.appendChild(f),g.element.appendChild(b)}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document);